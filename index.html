<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>Praca In≈ºynierska</title>
    <script type="text/javascript" src="scripts/genIslands.js"></script>
    <script type="text/javascript" src="scripts/genContinental.js"></script>
    <script type="text/javascript" src="scripts/cellauto.js"></script>
    <script type="text/javascript" src="scripts/main.js"></script>

    <link rel="stylesheet" href="style/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Fondamento&display=swap" rel="stylesheet"> 
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<script>
    document.addEventListener("DOMContentLoaded", () => {
        genMap();
        const menuButton = document.querySelector(".menu-button");
        const menu = document.querySelector(".user-menu");
        menuButton.addEventListener("click", ()=>{
            menu.classList.toggle("user-menu-active");
            menuButton.classList.toggle("menu-button-active");
        });

        const infoButton = document.querySelector(".info-btn");
        const modalScreen = document.querySelector(".modal-screen");
        const modalContent = document.querySelector(".modal-content");
        infoButton.addEventListener("click", ()=>{
            modalScreen.style.visibility = "visible";
            modalContent.style.top = "15%";
        });
        window.onclick = function(event) {
            if (event.target == modalScreen) {
            modalScreen.style.visibility = "hidden";
            modalContent.style.top = "-100%";
            }
        } 
    });
    
    function genMap() {
        let config = getConfig();
        switch (config.genType) {
            case '1':
                genContinental(config);
                break;
            case '2':
                genIslands(config);
                break;
        }
    }
</script>
</head>

<body>
    <div class="main-container">
        <div class="canvas-container">
            <h1>Fantasy Map Generator</h1>
            <button class="menu-button"></button>
            <button class="info-btn"><b>i</b></button>
            <canvas id="myCanvas">Your browser doesn't support HTML5 canvas</canvas>
            <div class="loading-gear"></div>
            <button class="btn-generate" onclick="genMap()">Generate Map</button>
            <div class="user-menu">
                <h3>Generation Options</h3>
                <hr></hr>
                <div class="user-menu-select">
                    <b>Choose generation type:</b>
                    <select id="genSelection">
                        <option value="1">Continental</option>
                        <option value="2">Islands</option>
                    </select>
                </div>
                <hr></hr>
                <div class="user-menu-select">
                    <b>Name of your land:</b>
                    <input type="text" id="landName" maxlength="14" style="text-align: center">
                </div>
                <hr></hr>
                <div class="user-menu-section">
                    <b>Rivers</b>
                    <input type="range" id="rivers" min="0" max="3" value="2">
                </div>
                <div class="user-menu-section">
                    <b>Mountains</b>
                    <input type="range" id="mountains" min="0" max="3" value="1">
                </div>
                <hr></hr>
                <div class="user-menu-section">
                    <b>Cities</b>
                    <input type="range" id="cities" min="0" max="3" value="1">
                </div>
                <div class="user-menu-section">
                    <b>Forests</b>
                    <input type="range" id="forests" min="0" max="3" value="1">
                </div>
                <hr></hr>
                <div class="user-menu-section">
                    <b>Beaches</b>
                    <input type="range" id="beaches" min="0" max="3" value="1">
                </div>
                <div class="user-menu-section">
                    <b>-</b>
                    <input type="range" id="" min="0" max="3" value="1">
                </div>
                <hr></hr>
                <div class="user-menu-section checkbox">
                    <label for="wDecoration">Water Decoration</label>
                    <input type="checkbox" id="wDecorations" value="true" checked>
                </div>
                <div class="user-menu-section checkbox">
                    <label for="lDecoration">Land Decoration</label>
                    <input type="checkbox" id="lDecorations" value="true" checked>
                </div>
                <div class="user-menu-section checkbox">
                    <label for="sprawlingRivers">Sprawling Rivers</label>
                    <input type="checkbox" id="sprawlingRivers" value="false">
                </div>
                <div class="user-menu-section checkbox">
                    <label for="ribbon">Draw Ribbon</label>
                    <input type="checkbox" id="ribbon" value="true" checked>
                </div>
            </div>
        </div>
    </div>
    <div class="modal-screen">
        <div class="modal-content">
            <b>About</b>
            <p>
                Fantasy Map Generator is an engineering thesis project created using HTML5, CSS3 (SASS) and JavaScript ES6. It's based on cellular automata model using Sanojian's
                <a href="http://sanojian.github.io/cellauto/">cellauto.js</a> library. You can check github page for this project down below.
            </p>
            <hr>
            <b>How does it work?</b>
            <p>
                All squares (called cells) on the map have different states and properties. Cell can change it's state based on states and properties of all the surrounding 8 neighbors.
                For example river cell can only appear near a mountain cell, that's why the amount of mountain cells on the map affects the amount of rivers created. With settings
                menu you can adjust generation of some of the different cells, but results may vary as most of the cells have some sort of randomness involved in the generation. 
                You can also turn on and off some of the options like "sprawling rivers", which, if turned on, makes river generation much more chaotic and complex.
            </p>
            <hr>
            <div class="links">
                <b>Created by Bartosz Zysk</b>
                <a href="https://github.com/Skejven11/Fantasy-Map-Generator" class="fa fa-github"></a>
            </div>
        </div>
    </div>
</body>

</html>
